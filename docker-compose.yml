version: "3.9"  # optional since v1.27.0
services:
  grisera_neo4j:
    build: graph_db
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      - NEO4J_dbms_security_auth__minimum__password__length=5

  graph_api:
    build: graph_api
    ports:
      - "18080:80"
    extra_hosts: 
      - "host.docker.internal:host-gateway"
    environment:
      - DB_HOST=host.docker.internal
      - DB_PORT=7474
      - TIMEOUT=2137
      

  grisera_api_time_series:
    build: grisera_api
    ports:
      - "18084:80"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      - GRAPH_API_HOST=host.docker.internal
      - GRAPH_API_PORT=18080
      - PERSISTENCE_TYPE=3
      - TIMEOUT=2137
      

